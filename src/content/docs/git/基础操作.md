---
title: 基础操作
description: 基础操作
sidebar:
  order: 1
---

## 安装

```bash
sudo apt install git

git --version
```

## 配置

```bash
git config --global user.name "Your Name"
git config --global user.email "Your Email"
git config --global init.defaultBranch main

git config --global credential.helper store  # 保存用户密码

# 查看配置信息
git config --list

Output
user.name=QingLi
user.email=you@example.com

# 查看全局配置
git config --global --list
```

## 常用命令

```bash
# 初始化仓库
git init

# 克隆远程仓库
git clone https://github.com/your-username/your-repo.git

# 查看状态
git status

# 添加文件到暂存区
git add README.md
git add .

# 提交更改
git commit -m "提交说明"

# 推送到远程仓库
git push origin main

# 拉取最新代码
git pull origin main

# 查看提交记录
git log

git log --oneline

# 查看操作的历史记录
git reflog

# 对比文件差异
git diff

git diff HEAD

git diff --cached

git diff b270efb HEAD

git diff HEAD^ HEAD

# 查看暂存区的文件
git ls-files

# 删除文件
git rm temp.go

# 从本地仓库删除不想要被提交的文件
git rm --cached temp.log

# 连接远程仓库
git remote add origin https://xxx

# 查看本地 Git 目录关联的远程仓库地址
git remote -v

# 取消与远程仓库的关联
git remote remove origin

# 推送代码到远程仓库
git push origin master
```

## 分支管理

### 常用分支类型

- `main` 主分支
- `develop` 开发分支
- `feature/*` 功能分支
- `bugfix/*` 修复分支
- `release/*` 发布分支

### 分支操作命令

```bash
# 查看分支
git branch
# 查看远程分支
git branch -r
# 查看所有分支
git branch -a

# 创建分支
git branch feature/ai-mvp
# 创建并切换分支
git checkout -b feature/ai-mvp

# 切换分支
git switch main

# 合并分支，需要先切换到主分支
git merge feature/ai-mvp

# 删除本地分支
git branch -d feature/ai-mvp
# 删除远程分支
git push origin --delete feature/ai-mvp
```

## 开发流程

```bash
# 1. 获取最新代码
git switch main
git pull origin main

# 2. 创建功能分支
git checkout -b feature/ai-mvp

# 3. 开发功能，定期提交代码
git add .
git commit -m "feat: 添加 AI MVP 功能"

# 4. 推送代码到远程仓库
git push origin feature/ai-mvp

# 5. 创建 PR，合并到主分支
git switch main
git pull origin main
git merge feature/ai-mvp
git push origin main
git branch -d feature/ai-mvp
git push origin --delete feature/ai-mvp

# 6. 删除本地分支
git branch -d feature/ai-mvp

# 7. 获取最新代码
git switch main
git pull origin main
```

### 同步最新代码

```shell
git switch dev

# 把 dev 更新到最新 main
git rebase main
```

### 紧急bug修复

```bash
# 1. 从main分支创建一个bugfix分支
git checkout -b bugfix/fix-bug-1010

# 2. 修复bug，并提交代码
git add .
git commit -m "fix: 修复 AI MVP 功能"

# 3. 合并到main分支
git switch main
git merge bugfix/fix-bug-1010

# 4. 合并到develop分支
git switch develop
git merge bugfix/fix-bug-1010

# 5. 删除bugfix分支
git branch -d bugfix/fix-bug-1010
```

## 提交信息规范

```yaml
# 示例
git commit -m "feat: 添加 AI MVP 功能"
git commit -m "fix: 修复 AI MVP 功能"
git commit -m "docs: 更新 README.md"
git commit -m "style: 格式化代码"
git commit -m "refactor: 重构代码"
git commit -m "test: 添加测试用例"
git commit -m "chore: 构建工具配置"
git commit -m "ci: 持续集成配置"
git commit -m "perf: 优化代码"
git commit -m "revert: 回滚代码"
git commit -m "build: 构建代码"
```

## 撤销操作

```bash
# 撤销未提交的修改
git checkout -- README.md

# 撤销已提交的修改
git reset HEAD README.md

# 撤销提交，保留修改
git reset --soft HEAD^

# 回退到某个版本，并保留工作区和暂存区的内容
$ git reset --soft 5af90b8

# 回退到上一次版本
git reset --hard HEAD^

# 回退到某个版本，工作区和暂存区的内容都会被清空
$ git reset --hard 5af90b8
```
