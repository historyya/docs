---
title: 事务
description: 事务
sidebar:
  order: 4
---

## 概念

- 数据库的事务：在一次数据库会话操作过程中，所有的sql执行要么都成功，要么都失败
- redis的事务：在一个队列中，一次性、顺序性、排他性地执行一系列的命令

1. 单独的隔离操作：单线程执行，中间不会被其他命令插入
2. 没有隔离级别的概念：事务提交前任何指令都不会被实际执行
3. 不保证原子性：没有执行到一半进行回滚的能力
4. 排他性：会保证一个事务中的命令依次执行，不会被其他命令插入

## 常用命令

### 正常执行

```text
> multi  #开启事务
OK
> set k1 v1  #开始入队
QUEUED
> set k2 v2
QUEUED
> get k2
QUEUED
> del k1
QUEUED
> exec  #执行事务
```

### 放弃执行

```text
> multi  #开启事务
OK
> set k1 v1  #开始入队
QUEUED
> set k2 v2
QUEUED
> DISCARD  #放弃事务，事务队列中命令都不会被执行
OK
```
